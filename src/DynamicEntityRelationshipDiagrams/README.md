## Пример ER диаграмм и диаграмм классов

### Цели примера
- Описание объектов приложений/сервисов как [кастомные сущности](https://dochub.info/entities/docs/blank?dh-doc-id=dochub.flex_metamodel.entities).
- Формирование [ER диаграмм](https://plantuml.com/ru/ie-diagram) и [диаграммы классов](https://plantuml.com/ru/class-diagram);
- Формирование диаграммы классов в представлении,с которым привыкли работать на платформе 1С:Предприятие 8, 
в том числе использование [спрайтов](https://plantuml.com/ru/sprite) PlantUML;
- Организация бесшовного взаимодействия различных элементов проекта (кликабельные гиперссылки в диаграммных с сохранением варианта используемой диаграммы);
- Измененный подход к интерфейсу объектов архитектуры.

### Чего нет в примере
- [Валидации](https://dochub.info/docs/dochub.rules) корректности и полноты заполнения озера данных проекта (архитектуры);
- Обработки перехода по составным типам данных, когда один атрибут заявлен как два различных типа данных в свойстве type.

### Ограничения
- Ограничение отображаемых элементов диаграмм, например, по подсистеме или другому признаку. Например, справочник «Пользователи» используется в 450+ объектах, и 
диаграмма при открытии будет не читаемой;
- В примерах для «1С:Документооборот» и «1С:СППР» загружены только объекты типа Справочники, Документы, Регистры сведений при этом, перечень атрибутов ограничивается только обязательными к заполнению;
- В примере для «1С:ERP» загружены только объекты типа Справочники, Документы, Регистры сведений. При необходимости код создания массива данных может быть изменен в обработке «Создание массива данных 1С приложения.epf».

### Файловая структура примера

```
|- Datalake                                   - Озеро данных проекта (архитектуры)
|  |- Applications                            - Озеро данных "Архитектуры приложений/сервисов"
|  |  |- DocumentManagement                   - Приложения функционального контура "Документооборот"
|  |  |  |- DocumentFlow.yaml                 - Описание приложения "1С:Документоборот"
|  |  |- FinancialManagement                  - Приложения функционального контура "Финансовый контур"
|  |  |  |- ERP.yaml                          - Описание приложения "1С:EPR"
|  |  |- Technological                        - Приложения функционального контура "Технологический контур"
|  |  |  |- SPPR.yaml                         - Описание приложения "1С:СППР"
|  |  |- base.yaml                            - Определение структуры Организации, Приложений/Сервисов, Функциональных контуров
|  |- Data                                    - Озеро данных "Архитектуры данных"
|  |  |- ApplicationsData                     - Описания объектов данных приложений"
|  |  |  |- ERP.yaml                          - Объекты данных приложения "1С:EPR"
|  |  |  |- SPPR.yaml                         - Объекты данных приложения "1С:СППР"
|  |  |  |- DocumentFlow.yaml                 - Объекты данных приложения "1С:Документоборот"
|- Imgs                                       - Изображения для README.md
|- Metamodel                                  - Метамодель проекта (архитектуры), определяющая объекты, их наполнение и зависимости
|  |- Applications                            - Метамодель "Архитектуры приложений/сервисов"
|  |  |- Extensions                           - Реализация расширенной карточки объекта вида "components"
|  |  |  |- extended_card_application.md      - Расширенная карточка приложения/сервиса в Markdown
|  |  |  |- extended_component_card.yaml      - Расширенная карточка как кастомная сущность (entities)
|  |- Constants                               - Константы, используемые константы в проекте, например, периодичность проведения актуализации архитектуры
|  |  |  |- constants_model.yaml              - Константы
|  |- Data                                    - Метамодель "Архитектуры данных"
|  |  |- EntityRelationshipDiagrams           - Функциоанал ER диаграмм  
|  |  |  |- Templates                         - Макеты генерации диаграмм для PlantUML. Внутри макетов определена возможность перехода между отдельными элементами с сохранением варианта используемой диаграммы
|  |  |  |  |- blank.puml                     - Диаграмма классов 
|  |  |  |  |- format.puml                    - Диаграмма классов в представлении 1С c описанием спрайтов в двух форматах
|  |  |  |  |- er_format.puml                 - ER диаграмма
|  |  |  |  |- er_format_v2.puml              - ER диаграмма (v2)
|  |  |  |  |- er_format_v2.puml              - ER диаграмма (v2)
|  |  |  |- er_diagram_functions.yaml         - Функция формирующая универсальный набор данных для создания диаграмм
|  |  |  |- er_diagram_model.yaml             - Описание диаграмм как кастомная сущность для обеспечения кликабельных гиперссылок в диаграммных с сохранением варианта используемой диаграммы
|  |  |- Templates                            - Макеты карточки объектов приложений
|  |  |  |- application_data_object_card.yaml - Карточка объекта приложения/сервиса в Markdown
|  |  |- datasets.yaml                        - Наборы данных
|  |  |- docs.yaml                            - Документы
|  |- Tools                                   - Обработка создания массива данных 1С приложения
|- README.md                                  - Описание репозитория
```
### Примеры

#### Расширенная карточка приложения/сервиса
В карточке приложения/сервиса сразу отображается количество объектов приложений. При переходе
по ID открывается стандартная карточка components 
![AppCard.png](Imgs%2FAppCard.png)

#### Карточка объекта данных приложения/сервиса
Гиперссылки кликабельны и позволяют переходить между связанными объектами приложений
![AppDataCard.png](Imgs%2FAppDataCard.png)

#### Карточка объекта данных приложения/сервиса (продолжение)
Дополнительно отображаются зависимости (входящие и исходящие) для возможности анализа без необходимости использовать диаграммы 
![AppDataCardLinks.png](Imgs%2FAppDataCardLinks.png)

#### Карточка объекта данных приложения/сервиса

#### Диаграмма классов
![blank.svg](Imgs%2Fblank.svg)

#### Диаграмма классов в представлении 1С
![format.svg](Imgs%2Fformat.svg)

#### ER диаграмма
![er.svg](Imgs%2Fer.svg)

#### ER диаграмма (v2)
![er_v2.svg](Imgs%2Fer_v2.svg)

#### Выбор варианта диаграммы (right mouse button click)
![choosing_variant.png](Imgs%2Fchoosing_variant.png)
## Авторские права
- Автор примера: https://t.me/SultanovStanislav
- Примеры спрайтов: https://github.com/plastinin/1ce-icons-for-plantuml